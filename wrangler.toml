name = "tokyo2025"
main = "src/worker.ts"
compatibility_date = "2024-06-01"

# Observability (with enhanced sampling for debugging secrets)
[observability]
enabled = true
head_sampling_rate = 1.0  # 100% sampling for debugging, reduce to 0.1-0.01 in production

# Secrets Store - TODO: Replace STORE_ID_HERE with actual store ID
# Get your store ID by running: npx wrangler secrets-store store list --remote
secrets_store_secrets = [
  { binding = "OPENAI_API_KEY", store_id = "STORE_ID_HERE", secret_name = "OPENAI_API_KEY" },
  { binding = "GOOGLE_API_KEY", store_id = "STORE_ID_HERE", secret_name = "GOOGLE_API_KEY" },
  { binding = "CLOUDFLARE_ACCOUNT_ID", store_id = "STORE_ID_HERE", secret_name = "CLOUDFLARE_ACCOUNT_ID" },
  { binding = "CLOUDFLARE_API_TOKEN", store_id = "STORE_ID_HERE", secret_name = "CLOUDFLARE_API_TOKEN" },
  { binding = "ADMIN_API_KEY", store_id = "STORE_ID_HERE", secret_name = "ADMIN_API_KEY" }
]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "tokyo2025"
database_id = "6aa1da38-15f9-42d1-9195-a6dd0f56a58e"

# KV Namespace
[[kv_namespaces]]
binding = "MEMORY"
id = "0ba9fd878f4f4600aeeb9e4905a095e6"

# Cloudflare AI
[ai]
binding = "AI"

# Analytics
[[analytics_engine_datasets]]
binding = "ANALYTICS"

# Static Assets
[assets]
directory = "./public"
binding = "ASSETS"
